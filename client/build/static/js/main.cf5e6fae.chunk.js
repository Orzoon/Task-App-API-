(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{122:function(e,t,a){e.exports=a(190)},127:function(e,t,a){},128:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},190:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(10),o=a.n(s),i=a(12),l=a(9),c=a(14),d=a(15),u=a(7),m=a(16),h=a(49),g=a(34),p=(a(127),a(8)),f=(a(128),"https://task-app-heroku.herokuapp.com"),b={loggedIn:!1,isLoggedIn:function(){var e=k("token");return this.loggedIn=!(!e||null==e)},isLoggedOut:function(){var e=(new Date).toUTCString();document.cookie="token=; expires=".concat(e,"; path=").concat("/",";"),this.loggedIn=!1}},k=function(e){var t="";decodeURIComponent(document.cookie).split(";").filter((function(a){var n=a.split("=");return n[0].trim()===e?t=n[1]:null}));return t},v=function(e,t){document.cookie="".concat(e,"=").concat(t)},E=a(232),O=a(224),y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={username:"",password:"",redirect:null,loading:!1,errorMessage:""},a.formHandler=a.formHandler.bind(Object(u.a)(a)),a.signIn=a.signIn.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"formHandler",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(p.a)({},t,a))}},{key:"signIn",value:function(e){var t=this;this.setState({loading:!0}),e.preventDefault();var a=this;if(0!==this.state.username.length&&0!==this.state.password){this.setState({errorMessage:""});var n={email:this.state.username,password:this.state.password};fetch(f+"/users/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){if(400===e.status)throw t.setState({loading:!1}),new Error("please fill in the form correctly!!");return e.json()})).then((function(e){e&&(v("token",e.token),b.isLoggedIn(),console.log(b.loggedIn),a.setState({password:"",username:"",redirect:!0,loading:!1}),a.props.loginController())})).catch((function(e){console.log("error",e),a.setState({loading:!1,errorMessage:e.message})}))}else this.setState({loading:!1,errorMessage:"please fill up the login form!!"})}},{key:"render",value:function(){var e,t,a=this;return this.state.redirect?r.a.createElement(g.a,{to:"/app"}):r.a.createElement("div",{className:"loginFormContainer"},r.a.createElement("form",{className:"loginForm"},r.a.createElement("div",{className:"formHeading"},"have account!! :)"),0!==this.state.errorMessage.length?r.a.createElement("div",{className:"errorMessage"},r.a.createElement("p",null,this.state.errorMessage)):null,r.a.createElement("div",{className:"input"},r.a.createElement(E.a,(e={fullWidth:!0,variant:"outlined",id:"standard-dense",label:"email",margin:"dense",onChange:this.formHandler,name:"username"},Object(p.a)(e,"id","username"),Object(p.a)(e,"type","email"),e))),r.a.createElement("div",{className:"input"},r.a.createElement(E.a,(t={fullWidth:!0,variant:"outlined",id:"password",type:"password",label:"password",margin:"dense"},Object(p.a)(t,"id","password"),Object(p.a)(t,"name","password"),Object(p.a)(t,"onChange",this.formHandler),t))),r.a.createElement("div",{className:"btn-login"},r.a.createElement(O.a,{style:{backgroundColor:"#1976D2"},variant:"contained",color:"primary",onClick:this.signIn}," ",this.state.loading?"......":"login")),r.a.createElement("div",{className:"signup-link"},r.a.createElement("a",{href:"/",onClick:function(e){a.props.toggleForm(e)}},"Sign up"))))}}]),t}(r.a.Component);a(134);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={user:{name:"",email:"",password:"",confirmPassword:""},loading:!1,errorMessage:"",redirect:!1},a.formHandler=a.formHandler.bind(Object(u.a)(a)),a.signup=a.signup.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"formHandler",value:function(e){e.preventDefault();var t=e.target.name,a=e.target.value,n=w({},this.state.user);n[t]=a,this.setState({user:n})}},{key:"signup",value:function(e){this.setState({loading:!0}),e.preventDefault();for(var t=w({},this.state.user),a=Object.keys(t),n=0;n<a.length;n++)if(0===t[a[0]].length)return void this.setState({errorMessage:"Fields must not be empty",loading:!1});if(this.state.user.password===this.state.user.confirmPassword){delete t.confirmPassword;var r=this;fetch(f+"/users",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return 404===e.status?e.json().then((function(e){throw e})):201===e.status?e.json():void 0})).then((function(e){e?(v("token",e.token),b.isLoggedIn(),r.setState({redirect:!0,loading:!1}),r.props.loginController()):r.setState({loading:!1})})).catch((function(e){e.hasOwnProperty("errors")?e.errors.hasOwnProperty("email")?(delete e.message,e.message=e.errors.email.message):(e.message="password` is shorter than the minimum allowed length (7).")&&(e.message="password` is shorter than the minimum allowed length (7)."):e.hasOwnProperty("message")?"Failed to fetch"===e.message.trim()&&(e.message="please check your internet connection"):e.hasOwnProperty("code")?11e3===e.code&&(e.message="email already exists!!"):e.message="oops!! something terrible happened!!",r.setState({errorMessage:e.message,loading:!1})}))}else this.setState({errorMessage:"passwords do not match",loading:!1})}},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(g.a,{to:"/app"}):r.a.createElement("div",{className:"signupFormContainer"},r.a.createElement("form",{className:"signupForm"},r.a.createElement("div",{className:"formHeadingSignup"},"create account!! :)"),0!==this.state.errorMessage.length?r.a.createElement("div",{className:"errorMessage"},r.a.createElement("p",null,this.state.errorMessage)):null,r.a.createElement("div",{className:"input"},r.a.createElement(E.a,{fullWidth:!0,variant:"outlined",label:"username",margin:"dense",onChange:this.formHandler,name:"name",id:"username",type:"text"})),r.a.createElement("div",{className:"input"},r.a.createElement(E.a,{fullWidth:!0,variant:"outlined",label:"email",margin:"dense",onChange:this.formHandler,name:"email",id:"name",type:"email"})),r.a.createElement("div",{className:"input"},r.a.createElement(E.a,{fullWidth:!0,variant:"outlined",type:"password",label:"password",margin:"dense",id:"password",name:"password",onChange:this.formHandler})),r.a.createElement("div",{className:"input"},r.a.createElement(E.a,{fullWidth:!0,variant:"outlined",type:"password",label:"conform password",margin:"dense",name:"confirmPassword",onChange:this.formHandler})),r.a.createElement("div",{className:"btn-signup"},r.a.createElement(O.a,{style:{backgroundColor:"#1976D2"},variant:"contained",color:"primary",onClick:this.signup}," ",this.state.loading?"......":"signup")),r.a.createElement("div",{className:"signup-link"},r.a.createElement("a",{href:"#",onClick:function(t){e.props.toggleForm(t)}},"login"))))}}]),t}(r.a.Component),T=(a(91),function(e){return r.a.createElement("div",{className:"logoContainer"},e.logo)}),C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={logo:"Task App"},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"headerWrapper"},r.a.createElement("div",{className:"headerContainer"},r.a.createElement(T,{logo:this.state.logo}),this.props.children))}}]),t}(r.a.Component),N=a(225),P=function(e){return r.a.createElement("footer",{className:"appFooter"},r.a.createElement("ul",{className:"footerUl"},r.a.createElement("li",null,r.a.createElement(N.a,{href:"https://github.com/Orzoon",color:"inherit",target:"_blank",rel:"noopener"},"visit my github")),r.a.createElement("li",null,r.a.createElement(N.a,{href:"https://codepen.io/orzoon",color:"inherit",target:"_blank",rel:"noopener"},"visit my codepen"))))},D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={loginForm:!0},a.toggleForm=a.toggleForm.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"toggleForm",value:function(e){e.preventDefault(),console.log("hello"),this.setState({loginForm:!this.state.loginForm})}},{key:"render",value:function(){return this.props.isLoggedIn?r.a.createElement(g.a,{to:"/app"}):r.a.createElement("div",{className:"MainContainer"},r.a.createElement(C,null),!0===this.state.loginForm?r.a.createElement(y,{isLoggedIn:this.props.isLoggedIn,loginController:this.props.loginController,toggleForm:this.toggleForm}):r.a.createElement(S,{toggleForm:this.toggleForm,loginController:this.props.loginController}),r.a.createElement(P,null))}}]),t}(r.a.Component),H=a(18),I=a(235),M=a(223),L=a(226),F=a(191),x=a(229),A=a(227),B=a(228),_=a(230),U=a(4),z=Object(U.a)({switchBase:{color:"red","&$checked":{color:"#52d869"},"&$checked + $track":{backgroundColor:"#52d869"}},checked:{},track:{backgroundColor:"red",opacity:.5}})(I.a),V=function(e){return r.a.createElement("textarea",{className:"textarea",name:"description",id:"",cols:"",rows:"",test:"test",onChange:function(t){e.editTaskHandler(t,e.taskId)},defaultValue:e.description})},W=function(e){function t(e){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e={background:"#1976D2",color:"#fff"},t=this.props.task,a=t.editMode,n=t._id,s=t.description,o=t.completed,i=t.switchLoading,l=this.props,c=l.saveEditHandler,d=l.editTask,u=l.deleteTask,m=l.editTaskHandler,h=l.handleTaskSwitchStatus;return r.a.createElement(M.a,{className:"listPaper",square:!0},r.a.createElement("div",{className:"linearProgress"},i&&r.a.createElement(L.a,null)),r.a.createElement("li",{className:"taskListHeader"},r.a.createElement("div",{className:"taskSwitchStatus"},r.a.createElement(z,{checked:o,value:!o,onChange:function(e){h(e,n,"completed")}}),!i&&r.a.createElement(r.a.Fragment,null,o?"completed":"incomplete")),r.a.createElement("div",{className:"taskDescriptionContainer"},a?r.a.createElement(V,{description:s,editTaskHandler:m,taskId:n}):r.a.createElement("div",{className:"taskDescription"},r.a.createElement(F.a,{variant:"body1",display:"block",gutterBottom:!0},s))),r.a.createElement("div",{className:"taskButtonContainer"},a?r.a.createElement(O.a,{style:e,startIcon:r.a.createElement(A.a,null),variant:"contained",name:"description",className:"taskButtons",value:n,onClick:function(e){c(e)}},"save"):r.a.createElement(O.a,{style:e,startIcon:r.a.createElement(B.a,null),variant:"contained",className:"taskButtons",value:n,onClick:function(e){d(e)}},this.props.editTaskIndicator?r.a.createElement(x.a,{className:"addTaskSpinner"}):"edit"),r.a.createElement(O.a,{color:"secondary",startIcon:r.a.createElement(_.a,null),variant:"contained",className:"taskButtons",value:n,onClick:function(e){u(e)}},"delete"))))}}]),t}(r.a.Component),J=function(e){return r.a.createElement("div",{className:"createTaskContainer"},r.a.createElement("form",{onSubmit:function(t){e.addTask(t)}},r.a.createElement(E.a,{label:"Enter your new task",autoFocus:!0,fullWidth:!0,variant:"outlined",onChange:function(t){e.createTask(t)},value:e.createDescription,name:"createDescription",type:"text",className:"labelInput"}),r.a.createElement("div",{className:"addTaskEffect"},r.a.createElement(O.a,{style:{background:"#1976D2"},variant:"contained",color:"primary",onClick:function(t){e.addTask(t)},disabled:e.buttonDisable},"create new task"),e.buttonDisable&&r.a.createElement(x.a,{className:"addTaskSpinner"}))))},R=(a(135),a(109)),G=a(234),$=a(231);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).inputRef=r.a.createRef(),a.state={tasks:[],createDescription:"",buttonDisable:!1,tasksCount:null,currentCount:0,limit:5,skip:0,tabIndexValue:0,loading:!0,editTaskIndicator:!1},a.deleteTask=a.deleteTask.bind(Object(u.a)(a)),a.createTaskHandler=a.createTaskHandler.bind(Object(u.a)(a)),a.addTask=a.addTask.bind(Object(u.a)(a)),a.editTask=a.editTask.bind(Object(u.a)(a)),a.editTaskHandler=a.editTaskHandler.bind(Object(u.a)(a)),a.saveEditHandler=a.saveEditHandler.bind(Object(u.a)(a)),a.handleTaskSwitchStatus=a.handleTaskSwitchStatus.bind(Object(u.a)(a)),a.handleTabFilter=a.handleTabFilter.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=k("token");fetch(f+"/tasks/count",{method:"GET",headers:{authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(t){var a=t.count;e.setState({tasksCount:a})})).catch((function(e){return console.log(e)})),fetch(f+"/tasks?sortby=createdAt_desc",{method:"GET",headers:{authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(t){t=t.map((function(e){return e.editMode=!1,e.switchLoading=!1,e})),e.setState({tasks:t,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"deleteTask",value:function(e){var t=this;e.preventDefault();var a=e.currentTarget.value,n=this,r=k("token");fetch(f+"/tasks/".concat(a),{method:"DELETE",headers:{authorization:"Bearer ".concat(r)}}).then((function(e){return console.log("response",e),e.json()})).then((function(e){var a=e._id,r=Object(H.a)(n.state.tasks);r=r.filter((function(e){return e._id!==a})),n.setState({tasks:Object(H.a)(r),tasksCount:t.state.tasksCount-1}),n.props.errorMessageHandler("add","successMessage","Task successfully deleted!!")})).catch((function(e){return console.log(e)}))}},{key:"createTaskHandler",value:function(e){e.preventDefault();var t=e.target.name,a=e.target.value;this.setState(Object(p.a)({},t,a))}},{key:"addTask",value:function(e){var t=this;e.preventDefault();var a=this;this.setState({buttonDisable:!this.state.buttonDisable});var n=this.state.createDescription.toString();if(""!==n&&n.length>0){var r={description:this.state.createDescription},s=k("token");fetch(f+"/tasks",{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(s)},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){a.setState({tasks:[e].concat(Object(H.a)(a.state.tasks)),createDescription:"",buttonDisable:!a.state.buttonDisable,tasksCount:t.state.tasksCount+1,tabIndexValue:0}),a.props.errorMessageHandler("add","successMessage","Task successfully added!!")})).catch((function(e){return console.log(e)}))}else this.setState({buttonDisable:!1}),this.props.errorMessageHandler("add","errorMessage","Empty Task!!")}},{key:"editTask",value:function(e){e.preventDefault();var t=e.currentTarget.value,a=Object(H.a)(this.state.tasks),n=a.findIndex((function(e){return e._id===t}));a[n].editMode=!0,this.setState({tasks:Object(H.a)(a)})}},{key:"editTaskHandler",value:function(e,t){var a=e.currentTarget.name,n=e.currentTarget.value,r=Object(H.a)(this.state.tasks),s=r.findIndex((function(e){return e._id===t}));r[s][a]=n,this.setState({tasks:Object(H.a)(r)})}},{key:"saveEditHandler",value:function(e){e.preventDefault();var t=e.currentTarget.value,a=e.currentTarget.name,n=Object(H.a)(this.state.tasks),r=n.filter((function(e){return e._id===t}));r=K({},r[0]);var s=Object(p.a)({},a,r[a]),o=this,i=k("token");fetch(f+"/tasks/".concat(t),{method:"PATCH",headers:{"content-type":"application/json",authorization:"Bearer ".concat(i)},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){var t=n.findIndex((function(t){return t._id===e._id}));n[t]=e,n[t].editMode=!1,o.setState({tasks:Object(H.a)(n)}),o.props.errorMessageHandler("add","successMessage","Task successfully updated!!")})).catch((function(e){return console.log(e)}))}},{key:"handleTaskSwitchStatus",value:function(e,t,a){var n="true"===e.target.value.toLowerCase(),r=a,s=t,o=Object(H.a)(this.state.tasks),i=o.findIndex((function(e){return e._id===s})),l=K({},o[i]);l[r]=n,l.switchLoading=!0,o[i]=l,this.setState({tasks:o});var c={completed:n},d=this,u=k("token");fetch(f+"/tasks/".concat(s),{method:"PATCH",headers:{"content-type":"application/json",authorization:"Bearer ".concat(u)},body:JSON.stringify(c)}).then((function(e){return 200===!e.status&&((l=K({},o[i]))[r]=!n,l.switchLoading=!1,o[i]=l,d.setState({tasks:o})),e.json()})).then((function(e){e.switchLoading=!1,o[i]=e,0===d.state.tabIndexValue?d.setState({tasks:Object(H.a)(o)}):d.fetchDataHandler(d.state.tabIndexValue)})).catch((function(e){return console.log(e)}))}},{key:"handleTabFilter",value:function(e,t){t!==this.state.tabIndexValue&&(this.setState({tabIndexValue:t,loading:!0}),this.fetchDataHandler(t))}},{key:"fetchDataHandler",value:function(e){var t,a=k("token");switch(e){case 0:t="".concat(f,"/tasks?sortby=createdAt_desc");break;case 1:t="".concat(f,"/tasks?sortby=createdAt_desc&completed=true");break;case 2:t="".concat(f,"/tasks?sortby=createdAt_desc&completed=false")}var n,r=this;fetch(f+"/tasks/count",{method:"GET",headers:{authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).then((function(e){return n=e,fetch(t,{method:"GET",headers:{authorization:"Bearer ".concat(a)}})})).then((function(e){return e.json()})).then((function(e){r.setState({tasks:e,count:n,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.tasks;return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{createTask:this.createTaskHandler,addTask:this.addTask,buttonDisable:this.state.buttonDisable,createDescription:this.state.createDescription}),r.a.createElement("ul",null,r.a.createElement(M.a,{className:"filterTab"},r.a.createElement("li",null,r.a.createElement(G.a,{value:this.state.tabIndexValue,onChange:this.handleTabFilter,TabIndicatorProps:{style:{background:"#1976D2"}},textColor:"inherit",centered:!0},r.a.createElement($.a,{label:"All"}),r.a.createElement($.a,{label:"Completed"}),r.a.createElement($.a,{label:"Incomplete"})))),r.a.createElement(R.CSSTransitionGroup,{transitionName:"example",transitionEnterTimeout:500,transitionLeaveTimeout:300},0!==t.length&&!1===e.state.loading?t.map((function(t,a){return r.a.createElement(W,{ref:e.inputRef,key:t._id,task:t,deleteTask:e.deleteTask,editTask:e.editTask,editTaskHandler:e.editTaskHandler,saveEditHandler:e.saveEditHandler,handleTaskSwitchStatus:e.handleTaskSwitchStatus,editTaskIndicator:e.state.editTaskIndicator})})):!0===e.state.loading?r.a.createElement("li",{className:"empty loading"},"Loading............"):0===e.state.tasks.length&&1===e.state.tabIndexValue?r.a.createElement("li",{className:"empty"},"not a single completed Task!!"):0===e.state.tasks.length&&2===e.state.tabIndexValue?r.a.createElement("li",{className:"empty"},"not a single incomplete Task!!"):0===e.state.tasks.length&&!1===e.state.loading?r.a.createElement("li",{className:"empty"},"no task to display, create one"):void 0)))}}]),t}(n.Component),X=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"profileEditContainer"},r.a.createElement("form",{onSubmit:function(t){e.props.handleProfileUpdate(t)}},r.a.createElement(E.a,{fullWidth:!0,disabled:!0,label:"User_name",defaultValue:this.props.username,variant:"outlined",className:"UserInput"}),r.a.createElement(E.a,{fullWidth:!0,disabled:!0,defaultValue:this.props.email,label:"Email",variant:"outlined",className:"UserInput"}),r.a.createElement(E.a,{fullWidth:!0,name:"password",label:"New Password",variant:"outlined",type:"password",className:"UserInput",onChange:function(t){e.props.handlePassword(t)}}),r.a.createElement(E.a,{name:"conformPassword",fullWidth:!0,label:"Conform-New-Password",variant:"outlined",type:"password",className:"UserInput",onChange:function(t){e.props.handlePassword(t)}}),r.a.createElement("div",{className:"addTaskEffectSpin"},r.a.createElement(O.a,{type:"submit",style:{background:"#52d869"},variant:"contained",color:"primary",onClick:function(t){e.props.handleProfileUpdate(t)},disabled:this.props.profileSpinner},"save"),!0===this.props.profileSpinner?r.a.createElement(x.a,{className:"addTaskSpinnerSpin"}):null),r.a.createElement(O.a,{style:{background:"#1976D2"},variant:"contained",color:"primary",onClick:function(t){e.props.handleProfileEdit(t)}},"close")))}}]),t}(n.Component),Y=(a(146),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.props.messages,a=Object.keys(t);return"errorMessage"===a[0]?e="#D32F2F":"warningMessage"===a[0]?e="#FFA000":"successMessage"===a[0]&&(e="#43A047"),r.a.createElement("div",{className:"errorComponent",style:{backgroundColor:e}},t[a[0]])}}]),t}(r.a.Component)),Z=a(233);a(147);function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ae=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).toggleRef=r.a.createRef(),a.state={user:{_id:"",email:"",name:"",profileChange:!1,password:"",conformPassword:""},loading:!0,userLoaded:!1,profileToggle:!1,profileSpinner:!1,messages:{}},a.logoutHandler=a.logoutHandler.bind(Object(u.a)(a)),a.toggleHandler=a.toggleHandler.bind(Object(u.a)(a)),a.outsideClickhandler=a.outsideClickhandler.bind(Object(u.a)(a)),a.handleProfileEdit=a.handleProfileEdit.bind(Object(u.a)(a)),a.handleProfileUpdate=a.handleProfileUpdate.bind(Object(u.a)(a)),a.handlePassword=a.handlePassword.bind(Object(u.a)(a)),a.deleteAccountHandler=a.deleteAccountHandler.bind(Object(u.a)(a)),a.errorMessageHandler=a.errorMessageHandler.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=k("token").trim();fetch(f+"/users/me",{method:"GET",headers:{authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(t){var a=te({},e.state.user);a._id=t._id,a.name=t.name,a.email=t.email,e.setState({user:a,loading:!1,userLoaded:!0})})).catch((function(e){return console.log(e)}))}},{key:"logoutHandler",value:function(e){this.setState({loading:!0}),e.preventDefault();var t=e.target.name,a=k("token"),n=this;fetch("".concat(f,"/users/").concat(t),{method:"POST",headers:{authorization:"Bearer ".concat(a)}}).then((function(e){200===e.status&&(n.setState({userLoaded:!1,loading:!0}),n.props.logoutController())})).catch((function(e){return console.log(e)}))}},{key:"toggleHandler",value:function(){!1===this.state.profileToggle?window.addEventListener("click",this.outsideClickhandler,!1):!0===this.state.profileToggle&&window.removeEventListener("click",this.outsideClickhandler,!1),this.setState({profileToggle:!this.state.profileToggle})}},{key:"outsideClickhandler",value:function(e){this.toggleRef.current.contains(e.target)||this.toggleHandler()}},{key:"handleProfileEdit",value:function(e){e&&e.preventDefault();var t=te({},this.state.user);t.profileChange=!this.state.user.profileChange,this.setState({user:te({},t)})}},{key:"handlePassword",value:function(e){e.preventDefault();var t=e.target.name,a=e.target.value,n=te({},this.state.user);n[t]=a,this.setState({user:te({},n)})}},{key:"handleProfileUpdate",value:function(e){var t=this;if(e.preventDefault(),this.setState({profileSpinner:!0}),0===this.state.user.password.toString().trim().length)return this.setState({profileSpinner:!1}),void this.errorMessageHandler("add","warningMessage","empty password field !!");if(this.state.user.password.toString().trim()!==this.state.user.conformPassword.toString().trim())return this.setState({profileSpinner:!1}),void this.errorMessageHandler("add","warningMessage","passwords do not match !!");var a={password:this.state.user.password},n=k("token"),r=this;fetch("".concat(f,"/users/me"),{method:"PATCH",headers:{authorization:"Bearer ".concat(n)},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){r.setState({password:"",conformPassword:"",profileSpinner:!1}),r.errorMessageHandler("add","successMessage","password successfully updated!!"),t.handleProfileEdit(),console.log(e)})).catch((function(e){return console.log(e)}))}},{key:"deleteAccountHandler",value:function(e){this.toggleHandler(),e&&e.preventDefault();var t=k("token");window.confirm("are you sure you want to permanently delete your account")&&fetch("".concat(f,"/users/me"),{method:"DELETE",headers:{authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(e){})).catch((function(e){return console.log(e)}))}},{key:"errorMessageHandler",value:function(e,t,a){var n=this;console.log("MessageType",t),console.log("message",a);var r=te({},this.state.messages);r[t]=a,this.setState({messages:te({},r)}),setTimeout((function(){n.setState({messages:{}})}),2e3)}},{key:"render",value:function(){var e=r.a.createElement("div",{className:"userInfo",ref:this.toggleRef},r.a.createElement("div",{className:"profileIcon",onClick:this.toggleHandler},r.a.createElement(Z.a,{type:"user"}),this.state.profileToggle&&r.a.createElement("ul",{className:"menuListUl"},r.a.createElement("li",{className:"menuList"},r.a.createElement("button",{onClick:this.handleProfileEdit},"Edit Profile")),r.a.createElement("li",{className:"menuList"},r.a.createElement("button",{name:"logout",onClick:this.logoutHandler},"logout")),r.a.createElement("li",{className:"menuList"},r.a.createElement("button",{className:"AccountDelete",onClick:this.deleteAccountHandler},"delete account")),r.a.createElement("li",{className:"menuList"},r.a.createElement("button",{className:"menuCloseBtn",onClick:this.toggleHandler},"close menu")))),r.a.createElement("div",{className:"userName"},r.a.createElement("h1",null,this.state.user.name)));return r.a.createElement("div",{className:"MainContainer"},r.a.createElement(C,null,this.state.userLoaded?e:""),r.a.createElement("div",{className:"TaskContainer"},!0===this.state.user.profileChange?r.a.createElement(X,{handleProfileEdit:this.handleProfileEdit,username:this.state.user.name,email:this.state.user.email,profileSpinner:this.state.profileSpinner,handleProfileUpdate:this.handleProfileUpdate,handlePassword:this.handlePassword}):null,this.state.loading?r.a.createElement("div",{className:"loadingg"}," Loading.... "):r.a.createElement(Q,{user:this.state.user,handleProfileEdit:this.handleProfileEdit,errorMessageHandler:this.errorMessageHandler})),Object.keys(this.state.messages).length>0&&r.a.createElement(Y,{messages:this.state.messages}),this.state.loading?" ":r.a.createElement(P,null))}}]),t}(r.a.Component),ne=a(2),re=function(e){var t=e.component,a=e.logoutController,n=Object(ne.a)(e,["component","logoutController"]);return r.a.createElement(g.b,Object.assign({},n,{render:function(e){return!0===b.loggedIn?r.a.createElement(t,Object.assign({},e,{logoutController:a})):r.a.createElement(g.a,{to:"/"})}}))},se=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={isLoggedIn:!1,redirectToApp:!1,loading:!0},a.loginController=a.loginController.bind(Object(u.a)(a)),a.logoutController=a.logoutController.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){if(b.isLoggedIn()){var e=k("token"),t=this;fetch(f+"/users/me",{method:"GET",headers:{authorization:"Bearer ".concat(e)}}).then((function(e){e.ok?t.setState({isLoggedIn:!0,redirectToApp:!0,loading:!1}):t.setState({loading:!1})})).catch((function(e){t.setState({isLoggedIn:!1,redirectToApp:!1,loading:!1})}))}else this.setState({isLoggedIn:!1,redirectToApp:!1,loading:!1})}},{key:"loginController",value:function(){this.setState({isLoggedIn:!0,redirectToApp:!0,loading:!1})}},{key:"logoutController",value:function(){b.isLoggedOut(),this.setState({isLoggedIn:!1,redirectToApp:!1})}},{key:"render",value:function(){var e=this;return this.state.loading?"loading ...":r.a.createElement(h.a,null,r.a.createElement("div",{className:"wholeContainer"},r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/",render:function(t){return r.a.createElement(D,Object.assign({},t,{isLoggedIn:e.state.isLoggedIn,loginController:e.loginController}))}}),r.a.createElement(re,{path:"/app",logoutController:this.logoutController,component:ae}),r.a.createElement(g.b,{component:function(){return r.a.createElement("h1",null,"This page Does not exist!!")}}))))}}]),t}(n.Component);o.a.render(r.a.createElement(se,null),document.getElementById("root"))},91:function(e,t,a){}},[[122,1,2]]]);
//# sourceMappingURL=main.cf5e6fae.chunk.js.map